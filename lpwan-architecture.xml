<?xml version="1.0" encoding="UTF-8"?>
  <?xml-stylesheet type="text/xsl" href="rfc2629.xslt" ?>
  <!-- generated by https://github.com/cabo/kramdown-rfc2629 version 1.3.28 -->

<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
]>

<?rfc symrefs="yes"?>
<?rfc sortrefs="yes"?>
<?rfc strict="yes"?>
<?rfc compact="yes"?>
<?rfc toc="yes"?>

<rfc ipr="trust200902" docName="draft-pelov-lpwan-architecture-01" category="std">

  <front>
    <title abbrev="LPWAN Architecture">LPWAN Static Context Header Compression (SCHC) Architecture</title>

    <author initials="A." surname="Pelov" fullname="Alexander Pelov">
      <organization>Acklio</organization>
      <address>
        <postal>
          <street>1137A avenue des Champs Blancs</street>
          <city>35510 Cesson-Sevigne Cedex</city>
          <country>France</country>
        </postal>
        <email>a@ackl.io</email>
      </address>
    </author>
    <author initials="P." surname="Thubert" fullname="Pascal Thubert">
      <organization>Cisco Systems</organization>
      <address>
        <postal>
          <street>45 Allee des Ormes - BP1200</street>
          <city>06254 Mougins - Sophia Antipolis</city>
          <country>France</country>
        </postal>
        <email>pthubert@cisco.com</email>
      </address>
    </author>
    <author initials="A." surname="Minaburo" fullname="Ana Minaburo">
      <organization>Acklio</organization>
      <address>
        <postal>
          <street>1137A avenue des Champs Blancs</street>
          <city>35510 Cesson-Sevigne Cedex</city>
          <country>France</country>
        </postal>
        <email>ana@ackl.io</email>
      </address>
    </author>

    <date year="2021" month="April" day="28"/>

    
    <workgroup>lpwan Working Group</workgroup>
    

    <abstract>


<t>This document defines the SCHC architecture.</t>



    </abstract>


  </front>

  <middle>


<section anchor="Introduction" title="Introduction">

<t>The base operation and the definition of the SCHC compression &amp; Fragmentation are now described in several documents published by the LPWAN working group.</t>

<t>Among them:</t>

<t><list style="symbols">
  <t>The <xref target="rfc8724"/> defines the generic compression and fragmentation mechanisms for SCHC and applies it to IPv6 and UDP.</t>
  <t>The <xref target="I-D.ietf-lpwan-coap-static-context-hc"/> extend the compression to CoAP and OSCORE.</t>
  <t>The <xref target="I-D.ietf-lpwan-schc-yang-data-model"/> defines a rule representation using the YANG formalism.</t>
</list></t>

<t>As <xref target="I-D.ietf-lpwan-coap-static-context-hc"/> states, the SCHC compression and fragmentation mechanism can be implemented at different levels and/or managed by different organizations.
For instance, as represented figure <xref target="Fig-SCHCCOAP2"/>, IP compression and fragmentation may be managed by the network SCHC instance and end-to-end  compression between the device and the application. The former can itself be split in two instances since encryption
hides the field structure.</t>

<figure title="Different SCHC instances in a global system" anchor="Fig-SCHCCOAP2"><artwork><![CDATA[
         (device)            (NGW)                              (App)

         +--------+                                           +--------+
  A S    |  CoAP  |                                           |  CoAP  |
  p C    |  inner |                                           |  inner |
  p H    +--------+                                           +--------+
  . V    |  SCHC  |                                           |  SCHC  |
         |  inner |   cryptographical boundary                |  inner |
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  A S    |  CoAP  |                                           |  CoAP  |
  p C    |  outer |                                           |  outer |
  p H    +--------+                                           +--------+
  . C    |  SCHC  |                                           |  SCHC  |
         |  outer |   functional boundary                     |  outer |
 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  N      .  udp   .                                           .  udp   .
  e      ..........     ..................                    ..........
  t      .  ipv6  .     .      ipv6      .                    .  ipv6  .
  w C    ..........     ..................                    ..........
  o S    .  schc  .     .  schc  .       .                    .        .
  r H    ..........     ..........       .                    .        .
  k C    .  lpwan .     . lpwan  .       .                    .        .
         ..........     ..................                    ..........
             ((((LPWAN))))             ------   Internet  ------

                Figure 3: OSCORE compression/decompression.

]]></artwork></figure>

<t>This document defines a generic architecture for SCHC that can be used at any of these levels.
The goal of the architectural document is to orchestrate the different protocols and data model
defined by the LPWAN woeking group to design an operational and interoperable
framework for allowing IP application over contrained networks.</t>

</section>
<section anchor="definitions" title="Definitions">

</section>
<section anchor="global-architecture" title="Global architecture">

<t>As described in  <xref target="rfc8724"/> a SCHC service is composed of a Parser, analyzing
packets and creating a list of fields what will be used to match against the compression
rules. If a packet matches rules, compression can be applied following rules instructions.</t>

<t>If SCHC compressed packet is too large to be send in a single L2 frame, fragmentation
will apply. The process is similar, device rules are checked to find the most appropriate
fragmentation rule, regarding the SCHC packet size, the link error rate, the reliability
required by the application, …</t>

<t>On the other direction, when a packet SCHC arrives, the ruleID is used to find the rule.
Its nature allows to select if it is a compression or fragmentation rule.</t>

<t>The rule database contains a set of rules specific to a single device. The <xref target="rfc8724"/>
indicates that the SCHC instance reads the rules to process C/D and F/R, rules are not
modified during these actions.</t>

<t>A SCHC instance, summarized in the <xref target="Fig-Glob-Arch1"/>, implies C/D and F/R present in both end.
The device connected to a constrained network is in one end and the other end
is either located in the core network or at the application.</t>

<t>In any cases, the rules must be the same in both ends to perform C/D and F/R.</t>

<figure title="Summarized SCHC elements" anchor="Fig-Glob-Arch1"><artwork><![CDATA[
    (device)                                 (core|app)

     (---)                                     (---)
     ( r )                                     ( r )
     (---)                                     (---)
        . read                                   . read
        .                                        .
     +-----+                                  +-----+
 <===| R&D |<=..............................<=| C&F |<===
 ===>| C&F |=>..............................=>| R&D |===>
     +-----+                                  +-----+


]]></artwork></figure>

<t>To enable rule synchronization between both ends, a common rule representation must be defined.</t>

</section>
<section anchor="data-management" title="Data management">

<t><xref target="I-D.ietf-lpwan-schc-yang-data-model"/> defines an YANG data model to represent the rules. This enables the use of several protocols for rule management, such as NETCONF, RESTCONF and CORECONF. NETCONF uses SSH, RESTCONF uses HTTPS, and CORECONF uses CoAP(s) as their respective transport layer protocols. The data is represented in XML under NETCONF, in JSON under RESTCONF and in CBOR under CORECONF.</t>

<figure title="Summerized SCHC elements" anchor="Fig-RM"><artwork><![CDATA[
                  create
       (-------)  read   +=======+ *
       ( rules )<------->|Rule   |<--|-------->
       (-------)  update |Manager|   NETCONF, RESTCONF or CORECONF
          . read  delete +=======+   request
          .
       +-------+
   <===| R & D |<===
   ===>| C & F |===>
       +-------+
]]></artwork></figure>

<t>Rule Manager (RM) is in charge of handling data derived from the YANG Data Model and apply changes to the rules database <xref target="Fig-RM"/>.</t>

<t>The RM is a application using the Internet to exchange information, therefore:</t>

<t><list style="symbols">
  <t>for the network-level SCHC, the communication does not require routing. Each of the end-points having an RM and both RMs can be viewed on the same link, therefore wellknown Link Local addresses can be used to identify the device and the core RM. L2 security MAY be deemed as sufficient, if it provides the necessary level of protection.</t>
  <t>for application-level SCHC, routing is involved and global IP addresses SHOULD be used. End-to-end encryption is recommended.</t>
</list></t>

<t>Management messages can also be carried in the negotiation protocol as proposed in <xref target="I-D.thubert-lpwan-schc-over-ppp"/></t>

<t>The RM traffic may be itself compressed by SCHC, especially if CORECONF is used, <xref target="I-D.ietf-lpwan-coap-static-context-hc"/> can be used.</t>

</section>
<section anchor="acknowledgements" title="Acknowledgements">

<t>The authors would like to thank (in alphabetic order):</t>

</section>


  </middle>

  <back>

    <references title='Normative References'>





<reference  anchor="rfc8724" target='https://www.rfc-editor.org/info/rfc8724'>
<front>
<title>SCHC: Generic Framework for Static Context Header Compression and Fragmentation</title>
<author initials='A.' surname='Minaburo' fullname='A. Minaburo'><organization /></author>
<author initials='L.' surname='Toutain' fullname='L. Toutain'><organization /></author>
<author initials='C.' surname='Gomez' fullname='C. Gomez'><organization /></author>
<author initials='D.' surname='Barthel' fullname='D. Barthel'><organization /></author>
<author initials='JC.' surname='Zúñiga' fullname='JC. Zúñiga'><organization /></author>
<date year='2020' month='April' />
<abstract><t>This document defines the Static Context Header Compression and fragmentation (SCHC) framework, which provides both a header compression mechanism and an optional fragmentation mechanism. SCHC has been designed with Low-Power Wide Area Networks (LPWANs) in mind.</t><t>SCHC compression is based on a common static context stored both in the LPWAN device and in the network infrastructure side. This document defines a generic header compression mechanism and its application to compress IPv6/UDP headers.</t><t>This document also specifies an optional fragmentation and reassembly mechanism. It can be used to support the IPv6 MTU requirement over the LPWAN technologies. Fragmentation is needed for IPv6 datagrams that, after SCHC compression or when such compression was not possible, still exceed the Layer 2 maximum payload size.</t><t>The SCHC header compression and fragmentation mechanisms are independent of the specific LPWAN technology over which they are used. This document defines generic functionalities and offers flexibility with regard to parameter settings and mechanism choices. This document standardizes the exchange over the LPWAN between two SCHC entities. Settings and choices specific to a technology or a product are expected to be grouped into profiles, which are specified in other documents. Data models for the context and profiles are out of scope.</t></abstract>
</front>
<seriesInfo name='RFC' value='8724'/>
<seriesInfo name='DOI' value='10.17487/RFC8724'/>
</reference>



<reference anchor="I-D.ietf-lpwan-schc-yang-data-model">
<front>
<title>Data Model for Static Context Header Compression (SCHC)</title>
<author initials='A' surname='Minaburo' fullname='Ana Minaburo'>
<organization />
</author>
<author initials='L' surname='Toutain' fullname='Laurent Toutain'>
<organization />
</author>
<date year='2021' month='February' day='02' />
<abstract><t>This document describes a YANG data model for the SCHC (Static Context Header Compression) compression and fragmentation rules.</t></abstract>
</front>
<seriesInfo name='Internet-Draft' value='draft-ietf-lpwan-schc-yang-data-model-04'/>
<format type='TXT' target='https://www.ietf.org/internet-drafts/draft-ietf-lpwan-schc-yang-data-model-04.txt'/>
</reference>



<reference anchor="I-D.ietf-lpwan-coap-static-context-hc">
<front>
<title>LPWAN Static Context Header Compression (SCHC) for CoAP</title>
<author initials='A' surname='Minaburo' fullname='Ana Minaburo'>
<organization />
</author>
<author initials='L' surname='Toutain' fullname='Laurent Toutain'>
<organization />
</author>
<author initials='R' surname='Andreasen' fullname='Ricardo Andreasen'>
<organization />
</author>
<date year='2021' month='March' day='08' />
<abstract><t>This draft defines how to compress the Constrained Application Protocol (CoAP) using the Static Context Header Compression (SCHC). SCHC is a header compression mechanism adapted for Constrained Devices.  SCHC uses a static description of the header to reduce the header's redundancy and size.  While RFC 8724 describes the SCHC compression and fragmentation framework, and its application for IPv6/UDP headers, this document applies SCHC for CoAP headers.  The CoAP header structure differs from IPv6 and UDP since CoAP uses a flexible header with a variable number of options, themselves of variable length.  The CoAP protocol messages format is asymmetric: the request messages have a header format different from the one in the response messages.  This specification gives guidance on applying SCHC to flexible headers and how to leverage the asymmetry for more efficient compression Rules.</t></abstract>
</front>
<seriesInfo name='Internet-Draft' value='draft-ietf-lpwan-coap-static-context-hc-19'/>
<format type='TXT' target='https://www.ietf.org/internet-drafts/draft-ietf-lpwan-coap-static-context-hc-19.txt'/>
</reference>



<reference anchor="I-D.thubert-lpwan-schc-over-ppp">
<front>
<title>SCHC over PPP</title>

<author initials='P' surname='Thubert' fullname='Pascal Thubert'>
    <organization />
</author>

<date month='June' day='4' year='2020' />

<abstract><t>This document extends RFC 5172 to signal the use of SCHC as the compression method between a pair of nodes over PPP.  Combined with RFC 2516, this enables the use of SCHC over Ethernet and Wi-Fi.</t></abstract>

</front>

<seriesInfo name='Internet-Draft' value='draft-thubert-lpwan-schc-over-ppp-01' />
<format type='TXT'
        target='http://www.ietf.org/internet-drafts/draft-thubert-lpwan-schc-over-ppp-01.txt' />
</reference>




    </references>





  </back>

<!-- ##markdown-source:
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

-->

</rfc>

